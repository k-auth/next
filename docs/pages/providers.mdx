# Providers

K-Auth에서 지원하는 로그인 provider들입니다.

## 내장 Provider

K-Auth에 기본 내장된 provider입니다. 별도 import 없이 바로 사용할 수 있습니다.

### 카카오

```typescript
KAuth({
  kakao: {
    clientId: process.env.KAKAO_CLIENT_ID!,
    clientSecret: process.env.KAKAO_CLIENT_SECRET!,
  },
});
```

**버튼:**
```tsx
<Button.Kakao onClick={() => signIn('kakao')} />
```

**추가 정보 수집:**
```typescript
kakao: {
  clientId: '...',
  clientSecret: '...',
  collectPhone: true,    // 전화번호
  collectBirth: true,    // 생년월일
  collectGender: true,   // 성별
  collectAgeRange: true, // 연령대
}
```

### 네이버

```typescript
KAuth({
  naver: {
    clientId: process.env.NAVER_CLIENT_ID!,
    clientSecret: process.env.NAVER_CLIENT_SECRET!,
  },
});
```

**버튼:**
```tsx
<Button.Naver onClick={() => signIn('naver')} />
```

**추가 정보 수집:**
```typescript
naver: {
  clientId: '...',
  clientSecret: '...',
  collectPhone: true,  // 전화번호
  collectBirth: true,  // 생년월일
  collectGender: true, // 성별
  collectName: true,   // 실명
}
```

## 외부 Provider

next-auth의 공식 provider를 `nextAuthConfig`로 추가합니다.

### 구글

```typescript
import Google from 'next-auth/providers/google';

KAuth({
  kakao: { ... },
  nextAuthConfig: {
    providers: [
      Google({
        clientId: process.env.GOOGLE_CLIENT_ID!,
        clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
      }),
    ],
  },
});
```

**버튼:**
```tsx
<Button.Google onClick={() => signIn('google')} />
```

**콘솔 설정:**
1. [Google Cloud Console](https://console.cloud.google.com) 접속
2. OAuth 동의 화면 설정
3. 사용자 인증 정보 → OAuth 2.0 클라이언트 ID 생성
4. Redirect URI: `http://localhost:3000/api/auth/callback/google`

### 애플

```typescript
import Apple from 'next-auth/providers/apple';

KAuth({
  kakao: { ... },
  nextAuthConfig: {
    providers: [
      Apple({
        clientId: process.env.APPLE_CLIENT_ID!,
        clientSecret: process.env.APPLE_CLIENT_SECRET!,
      }),
    ],
  },
});
```

**버튼:**
```tsx
<Button.Apple onClick={() => signIn('apple')} />
```

import { Callout } from 'nextra/components'

<Callout type="warning">
애플 로그인은 HTTPS 필수입니다. localhost에서 테스트가 어렵습니다.
</Callout>

**콘솔 설정:**
1. [Apple Developer](https://developer.apple.com) 접속
2. App ID 생성 (Sign in with Apple 활성화)
3. Services ID 생성
4. Key 생성 후 Client Secret 생성

자세한 내용은 [Auth.js Apple 문서](https://authjs.dev/getting-started/providers/apple) 참고

### GitHub

```typescript
import GitHub from 'next-auth/providers/github';

KAuth({
  kakao: { ... },
  nextAuthConfig: {
    providers: [
      GitHub({
        clientId: process.env.GITHUB_CLIENT_ID!,
        clientSecret: process.env.GITHUB_CLIENT_SECRET!,
      }),
    ],
  },
});
```

**콘솔 설정:**
1. [GitHub Developer Settings](https://github.com/settings/developers) 접속
2. OAuth Apps → New OAuth App
3. Authorization callback URL: `http://localhost:3000/api/auth/callback/github`

## 전체 예시

```typescript
import { KAuth } from '@relkimm/k-auth';
import Google from 'next-auth/providers/google';
import Apple from 'next-auth/providers/apple';

export const { handlers, auth, signIn, signOut } = KAuth({
  // 한국 서비스 (K-Auth 내장)
  kakao: {
    clientId: process.env.KAKAO_CLIENT_ID!,
    clientSecret: process.env.KAKAO_CLIENT_SECRET!,
    collectPhone: true,
  },
  naver: {
    clientId: process.env.NAVER_CLIENT_ID!,
    clientSecret: process.env.NAVER_CLIENT_SECRET!,
  },
  // 글로벌 서비스 (next-auth)
  nextAuthConfig: {
    providers: [
      Google({
        clientId: process.env.GOOGLE_CLIENT_ID!,
        clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
      }),
      Apple({
        clientId: process.env.APPLE_CLIENT_ID!,
        clientSecret: process.env.APPLE_CLIENT_SECRET!,
      }),
    ],
  },
});
```

```tsx
<Button.Group>
  <Button.Kakao onClick={() => signIn('kakao')} />
  <Button.Naver onClick={() => signIn('naver')} />
  <Button.Google onClick={() => signIn('google')} />
  <Button.Apple onClick={() => signIn('apple')} />
</Button.Group>
```
