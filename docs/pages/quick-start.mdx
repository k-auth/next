# 5분 만에 로그인 구현하기

진짜 5분이에요. 따라오세요.

import { Callout } from 'nextra/components'

## 1. 환경 변수 만들기

프로젝트 루트에 `.env.local` 파일을 만드세요:

```env filename=".env.local"
# 카카오
KAKAO_CLIENT_ID=your_kakao_rest_api_key
KAKAO_CLIENT_SECRET=your_kakao_client_secret

# 네이버
NAVER_CLIENT_ID=your_naver_client_id
NAVER_CLIENT_SECRET=your_naver_client_secret

# NextAuth 필수
AUTH_SECRET=your_secret_key
AUTH_TRUST_HOST=true
```

`AUTH_SECRET`은 이렇게 만들어요:

```bash
openssl rand -base64 32
```

<Callout type="info">
아직 카카오/네이버 앱이 없다면? → [콘솔 설정 가이드](/console-setup)
</Callout>

<Callout type="warning">
**배포할 때 주의!** `AUTH_TRUST_HOST=true` 없으면 Vercel, Railway에서 `UntrustedHost` 에러 나요.
</Callout>

## 2. auth.ts 만들기

프로젝트 루트에 `auth.ts` 파일을 만드세요:

```typescript filename="auth.ts"
import { KAuth } from '@k-auth/next';

export const { handlers, auth, signIn, signOut } = KAuth({
  kakao: {
    clientId: process.env.KAKAO_CLIENT_ID!,
    clientSecret: process.env.KAKAO_CLIENT_SECRET!,
    collect: { email: true, profile: true },
  },
  naver: {
    clientId: process.env.NAVER_CLIENT_ID!,
    clientSecret: process.env.NAVER_CLIENT_SECRET!,
  },
});
```

## 3. API 라우트 만들기

`app/api/auth/[...nextauth]/route.ts` 파일을 만드세요:

```typescript filename="app/api/auth/[...nextauth]/route.ts"
import { handlers } from '@/auth';

export const { GET, POST } = handlers;
```

## 4. 로그인 페이지 만들기

```tsx filename="app/login/page.tsx"
import { Button } from '@k-auth/next/ui';
import { signIn } from '@/auth';

export default function LoginPage() {
  return (
    <div className="min-h-screen flex items-center justify-center">
      <div className="w-full max-w-sm space-y-4">
        <h1 className="text-2xl font-bold text-center">로그인</h1>

        <Button.Group>
          <Button.Kakao onClick={() => signIn('kakao')} />
          <Button.Naver onClick={() => signIn('naver')} />
        </Button.Group>
      </div>
    </div>
  );
}
```

## 5. 로그인 확인하기

```tsx filename="app/page.tsx"
import { auth } from '@/auth';

export default async function Home() {
  const session = await auth();

  if (!session) {
    return <a href="/login">로그인하세요</a>;
  }

  return (
    <div>
      <p>안녕하세요, {session.user?.name}님!</p>
      <img src={session.user?.image} alt="프로필" />
    </div>
  );
}
```

## 6. 실행!

```bash
npm run dev
```

http://localhost:3000/login 열어보세요. 버튼 보이죠?

---

## 다음은요?

<Callout type="default">
**앱 설정이 안 됐다면** → [콘솔 설정](/console-setup)에서 카카오/네이버 앱 만들기
</Callout>

<Callout type="default">
**버튼 모양 바꾸고 싶다면** → [버튼 커스터마이징](/buttons)
</Callout>

<Callout type="default">
**전화번호도 받고 싶다면** → [추가 정보 수집하기](/options)
</Callout>

<Callout type="default">
**구글, 애플도 추가하고 싶다면** → [4대 Provider 설정](/providers)
</Callout>
