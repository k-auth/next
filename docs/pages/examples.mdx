# 예제

## 기본 로그인 페이지

```tsx filename="app/login/page.tsx"
import { Button } from '@k-auth/next/ui';
import { signIn } from '@/auth';

export default function LoginPage() {
  return (
    <div className="min-h-screen flex items-center justify-center">
      <div className="w-full max-w-sm p-8">
        <h1 className="text-2xl font-bold text-center mb-8">로그인</h1>

        <Button.Group>
          <Button.Kakao onClick={() => signIn('kakao')} />
          <Button.Naver onClick={() => signIn('naver')} />
        </Button.Group>
      </div>
    </div>
  );
}
```

## 아이콘만 있는 버튼

```tsx
<Button.Group direction="row">
  <Button.Kakao size="icon" onClick={() => signIn('kakao')} />
  <Button.Naver size="icon" onClick={() => signIn('naver')} />
  <Button.Google size="icon" onClick={() => signIn('google')} />
  <Button.Apple size="icon" onClick={() => signIn('apple')} />
</Button.Group>
```

## 세션 확인

```tsx filename="app/page.tsx"
import { auth } from '@/auth';

export default async function Home() {
  const session = await auth();

  if (!session) {
    return <a href="/login">로그인하세요</a>;
  }

  return (
    <div>
      <p>안녕하세요, {session.user?.name}님!</p>
      <img src={session.user?.image} alt="프로필" />
    </div>
  );
}
```

## 로그아웃

```tsx
import { signOut } from '@/auth';

<button onClick={() => signOut()}>로그아웃</button>
```

## 미들웨어로 보호

```typescript filename="middleware.ts"
import { auth } from '@/auth';

export default auth((req) => {
  if (!req.auth && req.nextUrl.pathname !== '/login') {
    const newUrl = new URL('/login', req.nextUrl.origin);
    return Response.redirect(newUrl);
  }
});

export const config = {
  matcher: ['/((?!api|_next/static|_next/image|favicon.ico).*)'],
};
```

## 전체 설정 예시

```typescript filename="auth.ts"
import { KAuth } from '@k-auth/next';
import Google from 'next-auth/providers/google';

export const { handlers, auth, signIn, signOut } = KAuth({
  kakao: {
    clientId: process.env.KAKAO_CLIENT_ID!,
    clientSecret: process.env.KAKAO_CLIENT_SECRET!,
    collectPhone: true,
    collectBirth: true,
  },
  naver: {
    clientId: process.env.NAVER_CLIENT_ID!,
    clientSecret: process.env.NAVER_CLIENT_SECRET!,
    collectName: true,
  },
  nextAuthConfig: {
    providers: [
      Google({
        clientId: process.env.GOOGLE_CLIENT_ID!,
        clientSecret: process.env.GOOGLE_CLIENT_SECRET!,
      }),
    ],
    callbacks: {
      session({ session, token }) {
        if (token.sub) {
          session.user.id = token.sub;
        }
        return session;
      },
    },
    pages: {
      signIn: '/login',
    },
  },
});
```
